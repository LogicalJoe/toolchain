	assume	adl=1

	section	.text
	public	_strnlen
_strnlen:
	pop	hl
	pop	de
	pop	bc
	push	bc
	push	de
	push	hl
	xor	a, a
	sbc	hl, hl
	sbc	hl, bc
	ret	z	; Return if buffer length is 0
	add	hl, bc	; Sets carry flag
	sbc	hl, de
	ex	de, hl
	cpir
	add	hl, de
	ret	z	; Return if null terminator was found
	inc	hl
	ret
